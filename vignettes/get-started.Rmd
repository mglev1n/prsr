---
title: "Get started"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{get-started}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(prsr)
```

<!-- WARNING - This vignette is generated by {fusen} from /dev/prsr.Rmd: do not edit by hand -->

<!-- 
Run this 'development' chunk

Store every call to library() that you need to run chunks line by line, as in a classical Rmd for analysis
-->


<!--

# Description of your package

This will fill the description of your package.
Fill and run the content of this chunk, before anything else. 

Note: when you will use other flat templates, this part will be in a separate file. Do not be surprised!
--> 


# Calculate PRS

<!-- 
This first section shows:

- the three parts necessary for a package: 'function', 'examples' and 'tests'.  
  + Note that the three following chunks have names accordingly.

-->

The `plink_prs()` function can be used to calculate a PRS using plink2, given a dataframe containing variant ids, effect alleles, corresponding weights, and a directory containing individual-level genotypes for the target population.


<!--
Here is an example on how to use the function.
This should be a reproducible and working example
-->

Here is an example of using the `plink_prs()` function to calculate a prs, given weights from `weights_df` and genotype information contained in the `/project/PMBB/PMBB-Release-2020-2.0/Imputed/pgen/` directory.


```{r examples-plink_prs, eval = FALSE}
#' \dontrun{
# load weights file into dataframe
weights_df <- fs::path_package("extdata", "PGS000667-PMBB.txt", package = "prsr") %>%
  vroom::vroom()

# calculate prs
prs_res <- plink_prs(
  base_df = weights_df,
  id_col = variant,
  effect_allele_col = effect_allele,
  effect_size_col = effect_weight_mg_dl,
  pfile_dir = "/project/PMBB/PMBB-Release-2020-2.0/Imputed/pgen/",
  plink_bin = "/scratch/Applications/PLINK/plink2_linux_x86_64_20211125/plink2a"
)
#' }
```

<!--
Here are some unit tests to verify the function works as expected.
-->


<!-- 

# Inflate your package

You're one inflate from paper to box.
Build your package from this very Rmd using `fusen::inflate()` 
-->



<!-- 
- Verify your `"DESCRIPTION"` file has been updated
- Verify your function is in `"R/"` directory
- Verify your test is in `"tests/testthat/"` directory
- Verify this Rmd appears in `"vignettes/"` directory 
-->

